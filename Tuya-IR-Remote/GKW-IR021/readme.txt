ESP8266칩 기반 Tuya 고퀄(헤이홈) 스마트 리모콘 허브(인증명 GKW-IR021) 펌웨어 백업

tasmotizer의 backup기능이 정상적으로 동작하지 않아, esptool을 통한 백업 방식 사용

github repository: https://github.com/espressif/esptool
flashing tool (win64) : https://github.com/espressif/esptool/releases/download/v3.2/esptool-v3.2-win64.zip

*주의* Tuya에서 ESP8266칩 기반의 펌웨어 조작을 막기 위해, 자체 WiFi칩으로 점차적으로 대체하고 있으므로, tasmotizer 작업이 불가능할 수도 있

#백업
esptool -b 115200 --port COM4 read_flash 0x000000 0x100000 flash_1M.bin

#복구
esptool -b 115200 --port COM4 write_flash --flash_freq 80m 0x000000 flash_1M.bin

#참고사이트
https://community.blynk.cc/t/how-to-backup-restore-official-firmware-on-any-espressif-esp8266-esp32/34309

#참고 로그

C:\Users\SOLBAM\Downloads\esptool-v3.2-win64\esptool-v3.2-win64>esptool -b 115200 --port COM4 read_flash 0x000000 0x100000 flash_1M.bin
esptool.py v3.2
Serial port COM4
Connecting......................................

A fatal error occurred: Failed to connect to Espressif device: No serial data received.
For troubleshooting steps visit: https://github.com/espressif/esptool#troubleshooting

C:\Users\SOLBAM\Downloads\esptool-v3.2-win64\esptool-v3.2-win64>esptool -b 115200 --port COM4 read_flash 0x000000 0x100000 flash_1M.bin
esptool.py v3.2
Serial port COM4
Connecting....
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP8266
Chip is ESP8266EX
Features: WiFi
Crystal is 26MHz
MAC: e0:98:06:9b:e9:a3
Uploading stub...
Running stub...
Stub running...
1048576 (100 %)
1048576 (100 %)
Read 1048576 bytes at 0x0 in 95.1 seconds (88.2 kbit/s)...
Hard resetting via RTS pin...

C:\Users\SOLBAM\Downloads\esptool-v3.2-win64\esptool-v3.2-win64>esptool -b 115200 --port COM4 write_flash --flash_freq 80m 0x000000 flash_1M.bin
esptool.py v3.2
Serial port COM4
Connecting....
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP8266
Chip is ESP8266EX
Features: WiFi
Crystal is 26MHz
MAC: 2c:f4:32:28:92:3f
Uploading stub...

A fatal error occurred: Invalid head of packet (0x00): Possible serial noise or corruption.

C:\Users\SOLBAM\Downloads\esptool-v3.2-win64\esptool-v3.2-win64>esptool -b 115200 --port COM4 write_flash --flash_freq 80m 0x000000 flash_1M.bin
esptool.py v3.2
Serial port COM4
Connecting......................................

A fatal error occurred: Failed to connect to Espressif device: Invalid head of packet (0x9C): Possible serial noise or corruption.
For troubleshooting steps visit: https://github.com/espressif/esptool#troubleshooting

C:\Users\SOLBAM\Downloads\esptool-v3.2-win64\esptool-v3.2-win64>
C:\Users\SOLBAM\Downloads\esptool-v3.2-win64\esptool-v3.2-win64>esptool -b 115200 --port COM4 write_flash --flash_freq 80m 0x000000 flash_1M.bin
esptool.py v3.2
Serial port COM4
Connecting....
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP8266
Chip is ESP8266EX
Features: WiFi
Crystal is 26MHz
MAC: 2c:f4:32:28:92:3f
Uploading stub...
Running stub...
Stub running...
Configuring flash size...
Flash will be erased from 0x00000000 to 0x000fffff...
Flash params set to 0x002f
Compressed 1048576 bytes to 336501...
Wrote 1048576 bytes (336501 compressed) at 0x00000000 in 31.6 seconds (effective 265.1 kbit/s)...
Hash of data verified.

Leaving...
Hard resetting via RTS pin...

C:\Users\SOLBAM\Downloads\esptool-v3.2-win64\esptool-v3.2-win64>esptool -b 115200 --port COM4 write_flash --flash_freq 80m 0x000000 flash_1M.bin
esptool.py v3.2
Serial port COM4
Connecting.................
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP8266
Chip is ESP8266EX
Features: WiFi
Crystal is 26MHz
MAC: bc:dd:c2:52:63:b9
Uploading stub...
Running stub...
Stub running...
Configuring flash size...
Flash will be erased from 0x00000000 to 0x000fffff...
Flash params set to 0x002f
Compressed 1048576 bytes to 336501...
Wrote 1048576 bytes (336501 compressed) at 0x00000000 in 31.6 seconds (effective 265.1 kbit/s)...
Hash of data verified.

Leaving...
Hard resetting via RTS pin...

C:\Users\SOLBAM\Downloads\esptool-v3.2-win64\esptool-v3.2-win64>
